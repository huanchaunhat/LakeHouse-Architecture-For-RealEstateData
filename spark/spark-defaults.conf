# === Cấu hình cơ bản ===
spark.master                     spark://spark-master:7077
spark.eventLog.enabled           false
spark.history.fs.logDirectory    /opt/bitnami/spark/events

# === Cấu hình S3A/MinIO ===
spark.hadoop.fs.s3a.endpoint                  http://minio:9000
spark.hadoop.fs.s3a.access.key                minio
spark.hadoop.fs.s3a.secret.key                minio123
spark.hadoop.fs.s3a.path.style.access         true
spark.hadoop.fs.s3a.connection.ssl.enabled    false
spark.hadoop.fs.s3a.impl                      org.apache.hadoop.fs.s3a.S3AFileSystem

# === Cấu hình Delta Lake ===
spark.sql.extensions                          io.delta.sql.DeltaSparkSessionExtension
spark.sql.catalog.spark_catalog               org.apache.spark.sql.delta.catalog.DeltaCatalog
spark.sql.warehouse.dir                       s3a://lakehouse/warehouse

# === CẤU HÌNH DYNAMIC ALLOCATION ===
spark.dynamicAllocation.enabled               true
spark.dynamicAllocation.shuffleTracking.enabled true
spark.dynamicAllocation.executorIdleTimeout   30s

# Cho phép bắt đầu với 0 executor
spark.dynamicAllocation.minExecutors          0
spark.dynamicAllocation.initialExecutors      1 
spark.dynamicAllocation.maxExecutors          4

# === CẤU HÌNH THRIFT SERVER ===
spark.hive.server2.authentication           NOSASL
spark.hive.server2.transport.mode           binary
spark.hadoop.hive.server2.authentication    NOSASL
spark.hadoop.hive.server2.transport.mode    binary